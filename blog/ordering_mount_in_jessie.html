<!DOCTYPE html><html lang="en"><head><link href="https://fonts.googleapis.com/css?family=Cantarell" rel="stylesheet"><title>Ordering mount points in Jessie (systemd &lt; 220)</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="https://copyninja.in/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Random Ramblings Full Atom Feed"><link href="https://copyninja.in/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Random Ramblings Categories Atom Feed"><link rel="stylesheet" type="text/css" href="/theme/css/pygments.css"><link rel="stylesheet" type="text/css" href="/theme/css/default.css"><meta name="tags" content="debian"><meta name="tags" content="systemd"><meta name="tags" content="mount"><meta name="tags" content="fstab"></head><body><div id="header" class="body"><div id="navigation"> | <a href="https://copyninja.in">Home</a> | | <a href="https://copyninja.in/about">About</a> | | <a href="https://copyninja.in/contact">Contact</a> | | <a href="https://copyninja.in/categories.html">Categories</a> | | <a href="https://copyninja.in/tags.html">Tags</a> | </div><h1><a href="https://copyninja.in/blog/ordering_mount_in_jessie.html">Ordering mount points in Jessie (systemd < 220)</a></h1></div><div id="content"><section id="content" class="body"><footer class="post-info"><p> Posted on Dec 14, 2015 By copyninja under devops </p></abbr></footer><div class="entry-content"><p>In the previous <a class="reference external" href="https://copyninja.info/blog/systemd_automount_entry.html">post</a> I had mentioned that I didn't figure out how to add dependency on mount points so as to achieve correct ordering of mount points. After a lot of search today I finally figured it out thanks to the <a class="reference external" href="https://bugzilla.redhat.com/show_bug.cgi?id=812826">bug report</a> and the <a class="reference external" href="http://lists.freedesktop.org/archives/systemd-devel/2015-May/031932.html">patch</a> which adds <em>x-systemd.requires</em> and other option to systemd.</p><p>So basically you can add additional ordering information to the <em>.mount</em> files generated by <em>systemd-fstab-generator</em> by adding a <em>ordering.conf</em> file to path <em>/etc/systemd/system/usr-local-bin.mount.d/</em> path with following contents.</p><div class="highlight"><pre><span></span><span class="k">[Unit]</span>
<span class="na">After</span><span class="o">=</span><span class="s">home.mount</span>
</pre></div><p>And that is it, now <em>usr-local-bin.mount</em> will be mounted after <em>home.mount</em> is activated.</p><p>I couldn't find this information directly in related manpages like <em>systemd.mount</em> or <em>systemd.automount</em>. Also this information is not directly available in search results!.</p></div><div id="footer"><p><italic>Tagged as: debian, fstab, mount, systemd, </italic></p></section></div><hr><div id="footer"> Site Proudly powered by <a href="http://getpelican.com/">Pelican</a></div></body></html>